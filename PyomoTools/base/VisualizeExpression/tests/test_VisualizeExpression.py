from ..VisualizeExpression import visualize_expression


def test_simple():
    expr = "15.0   + 3.0      <=  10.0"
    result = visualize_expression(expr)

    expected = """
15.0   + 3.0      <=  10.0
└─┬┘     └┬┘          └─┬┘
  │     ┌─┘     ┌───────┘ 
15.0 + 3.0 <= 10.0
└────┬───┘    └─┬┘
  ┌──┘    ┌─────┘ 
18.0 <= 10.0
└─────┬────┘
  ┌───┘     
False
"""
    assert result.strip() == expected.strip()


def test_long():
    expr = "- (-30.051033817601528*1                       + 10.923554054291756*0                       - 17.565764082218287*0                       + 18.393896109659522*0                       + 30.051033817601528*1      ) - (4.964349030034622 - 7.881055079167019)   <=  0.0"
    result = visualize_expression(expr)
    expected = """
- (-30.051033817601528*1                       + 10.923554054291756*0                       - 17.565764082218287*0                       + 18.393896109659522*0                       + 30.051033817601528*1      ) - (4.964349030034622 - 7.881055079167019)   <=  0.0
   └────────┬────────┘ │                         └────────┬───────┘ │                         └────────┬───────┘ │                         └────────┬───────┘ │                         └────────┬───────┘ │           └───────┬───────┘   └───────┬───────┘        └┬┘
            │          │               ┌──────────────────┘         │                                  │         │                                  │         │                                  │         │                   │                   │                 │ 
            │          │               │            ┌───────────────┘                                  │         │                                  │         │                                  │         │                   │                   │                 │ 
            │          │               │            │             ┌────────────────────────────────────┘         │                                  │         │                                  │         │                   │                   │                 │ 
            │          │               │            │             │            ┌─────────────────────────────────┘                                  │         │                                  │         │                   │                   │                 │ 
            │          │               │            │             │            │             ┌──────────────────────────────────────────────────────┘         │                                  │         │                   │                   │                 │ 
            │          │               │            │             │            │             │            ┌───────────────────────────────────────────────────┘                                  │         │                   │                   │                 │ 
            │          │               │            │             │            │             │            │             ┌────────────────────────────────────────────────────────────────────────┘         │                   │                   │                 │ 
            │          │               │            │             │            │             │            │             │            ┌─────────────────────────────────────────────────────────────────────┘                   │                   │                 │ 
            │          │               │            │             │            │             │            │             │            │              ┌──────────────────────────────────────────────────────────────────────────┘                   │                 │ 
            │          │               │            │             │            │             │            │             │            │              │                   ┌──────────────────────────────────────────────────────────────────────────┘                 │ 
           ┌┘          └─┐             │            │             │            │             │            │             │            │              │                   │              ┌─────────────────────────────────────────────────────────────────────────────┘ 
-(-30.051033817601528 * 1.0 + 10.923554054291756 * 0.0 - 17.565764082218287 * 0.0 + 18.393896109659522 * 0.0 + 30.051033817601528 * 1.0) - (4.964349030034622 - 7.881055079167019) <= 0.0
  └───────────┬───────────┘   └───────────┬──────────┘   └───────────┬──────────┘   └───────────┬──────────┘   └───────────┬──────────┘     └─────────────────┬─────────────────┘     └┬┘
              │          ┌────────────────┘                          │                          │                          │                                  │                        │ 
              │          │     ┌─────────────────────────────────────┘                          │                          │                                  │                        │ 
              │          │     │     ┌──────────────────────────────────────────────────────────┘                          │                                  │                        │ 
              │          │     │     │             ┌───────────────────────────────────────────────────────────────────────┘                                  │                        │ 
              │          │     │     │             │                      ┌───────────────────────────────────────────────────────────────────────────────────┘                        │ 
           ┌──┘          │     │     │             │                      │               ┌────────────────────────────────────────────────────────────────────────────────────────────┘ 
-(-30.051033817601528 + 0.0 - 0.0 + 0.0 + 30.051033817601528) - (-2.9167060491323964) <= 0.0
  └───────────┬───────────┘   └┬┘   └┬┘   └────────┬───────┘    └─────────┬─────────┘    └┬┘
              │          ┌─────┘     │             │                      │               │ 
           ┌──┘          │     ┌─────┘       ┌─────┘               ┌──────┘       ┌───────┘ 
-(-30.051033817601528 - 0.0 + 0.0 + 30.051033817601528) - -2.9167060491323964 <= 0.0
  └───────────┬───────────┘   └┬┘   └────────┬───────┘    └────────┬────────┘    └┬┘
           ┌──┘          ┌─────┘       ┌─────┘               ┌─────┘        ┌─────┘ 
-(-30.051033817601528 + 0.0 + 30.051033817601528) - -2.9167060491323964 <= 0.0
  └──────────────────────┬─────────────────────┘    └────────┬────────┘    └┬┘
   ┌─────────────────────┘                                   │              │ 
   │              ┌──────────────────────────────────────────┘              │ 
   │              │              ┌──────────────────────────────────────────┘ 
-(0.0) - -2.9167060491323964 <= 0.0
 └─┬─┘   └────────┬────────┘    └┬┘
  ┌┘            ┌─┘            ┌─┘ 
-0.0 - -2.9167060491323964 <= 0.0
└─┬┘   └────────┬────────┘    └┬┘
  │             │              │ 
-0.0 - -2.9167060491323964 <= 0.0
└────────────┬───────────┘    └┬┘
         ┌───┘         ┌───────┘ 
2.9167060491323964 <= 0.0
└───────────┬───────────┘
  ┌─────────┘            
False
"""
    assert result.strip() == expected.strip()
